import{V as o,a as h,s as d,_ as s,h as f}from"./vendor-abf23f8e.min.js";import{b as n}from"./index-9dee18c5.min.js";const E=(e,t,r,a)=>new Promise(l=>{let i=new FormData;i.append("action","monsterinsights_vue_get_report_data"),i.append("nonce",o.prototype.$mi.nonce),i.append("report",t),i.append("start",r),i.append("end",a),e.getters.date.compareReport&&(i.append("compare_report",!0),i.append("compare_end",e.getters.date.compareEnd),i.append("compare_start",e.getters.date.compareStart)),h.post(o.prototype.$mi.ajax,i).then(c=>{l(c.data)}).catch(function(c){e.dispatch("$_app/block",!1,{root:!0});const p=o.prototype.$getUrl("admin-notices","error-verifying-license","https://www.monsterinsights.com/my-account/support");if(c.response){const w=c.response;return o.prototype.$mi_error_toast({title:d(s("Can't load report data. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team.","google-analytics-for-wordpress"),w.status,w.statusText,'<a target="_blank" href="'+p+'">',"</a>")})}o.prototype.$swal.hideLoading(),o.prototype.$mi_error_toast({allowOutsideClick:!0,allowEscapeKey:!0,title:s("Error loading report data","google-analytics-for-wordpress"),html:c.message})})}),A=e=>{if(typeof e<"u"){const t=parseInt(e.toString().replace(".",""),10);return t.toString().length===1?parseInt(t===1?t+"00":t+"0"):t}},v=e=>{if(typeof e<"u"){let t={};return Object.keys(e).forEach(function(r){let a=r.toString().split("-").join("_");t[a]=e[r]}),t}},T={fetchReportData:E,getFormattedScore:A,keysReplaceHyphensWithUnderscores:v},D=(e,t)=>!o.prototype.$isPro()&&t!=="overview"?null:new Promise(r=>{if(!o.prototype.$mi.authed)return r(!1),e.commit("ENABLE_BLUR"),e.commit("ENABLE_NOAUTH"),!1;if(e.state[t]&&e.state[t].reportcurrentrange&&!e.state.date.compareReport&&e.state[t].reportcurrentrange.startDate===e.state.date.start&&e.state[t].reportcurrentrange.endDate===e.state.date.end)return r(!1),e.commit("DISABLE_BLUR"),!1;o.prototype.$mi_loading_toast(),e.commit("ENABLE_BLUR"),e.dispatch("$_queue/add",()=>T.fetchReportData(e,t,e.state.date.start,e.state.date.end).then(function(a){if(e.commit("SET_IS_LOADED"),a.data.message==="license_level"){u(e),r(!1);return}if(a.success)u(e),e.commit("DISABLE_BLUR"),e.commit("UPDATE_REPORT_DATA",{report:t,data:a.data}),r(!0);else{if(a.data.message==="invalid_grant"){u(e),r(!1),e.commit("ENABLE_REAUTH");return}if(a.data.footer&&a.data.footer==="install_addon"){let l=e.state.required_addon?e.state.required_addon:t;$(e,l).then(function(i){e.rootState.$_widget&&(e.commit("DISABLE_BLUR"),e.commit("$_widget/UPDATE_LOADED",!0,{root:!0}));let c=i?s("activate","google-analytics-for-wordpress"):s("install","google-analytics-for-wordpress");o.prototype.$mi_error_toast({title:!1,html:d(a.data.message,c),footer:'<a href="'+o.prototype.$mi.addons_url+'">'+s("Visit addons page","google-analytics-for-wordpress")+"</a>",report:t}),o.prototype.$swal({icon:"error",customClass:{container:"monsterinsights-swal"},title:s("Report Unavailable","google-analytics-for-wordpress"),html:d(a.data.message,c),allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!1,showCancelButton:!0,confirmButtonText:d(s("%s Addon","google-analytics-for-wordpress"),c.charAt(0).toUpperCase()+c.slice(1)),cancelButtonText:s("Dismiss","google-analytics-for-wordpress")}).then(function(p){p.value&&(i?_(e,e.rootState.$_addons.addons[l]):y(e,l))})})}else a.data.footer&&a.data.footer.indexOf("#/ecommerce")>0?(r(!1),o.prototype.$mi_error_toast({title:!1,html:a.data.message,report:t,showCancelButton:!0,cancelButtonText:s("Go Back To Reports","google-analytics-for-wordpress"),confirmButtonText:s("Enable Enhanced eCommerce","google-analytics-for-wordpress")}).then(function(l){l.value&&(window.location=a.data.footer)})):a.data.type&&a.data.type==="expired_license"?(r(!1),o.prototype.$mi_error_toast({type:"",customClass:{container:"monsterinsights-expired-license-alert-toast"},confirmButtonText:"",title:!1,html:a.data.message,footer:a.data.footer,report:t})):(r(!1),o.prototype.$mi_error_toast({title:!1,html:a.data.message,footer:a.data.footer,report:t,onClose:()=>{if(!a.data.type||a.data.type!=="INVALID_DATE_RANGE"||e.state.date==="last30days")return;const l=o.prototype.$mi_intervals().last30days;e.commit("UPDATE_INTERVAL","last30days"),e.commit("UPDATE_DATE",{start:l.start.format("YYYY-MM-DD"),end:l.end.format("YYYY-MM-DD")}),e.dispatch("getReportData",e.state.activeReport)}}))}}),{root:!0})});function $(e,t){return new Promise(function(r){e.dispatch("$_addons/getAddons","",{root:!0}).then(function(){e.rootState.$_addons.addons[t]&&e.rootState.$_addons.addons[t].installed?r(!0):r(!1)}).catch(function(){r(!1),g()})})}function y(e,t){o.prototype.$swal({icon:"info",customClass:{container:"monsterinsights-swal"},title:s("Installing Addon","google-analytics-for-wordpress"),html:s("Please wait","google-analytics-for-wordpress"),allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:function(){o.prototype.$swal.showLoading(),e.dispatch("$_addons/installAddon",e.rootState.$_addons.addons[t],{root:!0}).then(function(){_(e,e.rootState.$_addons.addons[t])}).catch(function(){g()})}})}function _(e,t){o.prototype.$swal({icon:"info",customClass:{container:"monsterinsights-swal"},title:s("Activating Addon","google-analytics-for-wordpress"),html:s("Please wait","google-analytics-for-wordpress"),allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:function(){o.prototype.$swal.showLoading()}}),e.dispatch("$_addons/activateAddon",t,{root:!0}).then(function(){o.prototype.$swal({icon:"info",customClass:{container:"monsterinsights-swal"},title:s("Addon Activated","google-analytics-for-wordpress"),html:s("Loading report data","google-analytics-for-wordpress"),allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:function(){o.prototype.$swal.showLoading(),setTimeout(function(){window.location.reload()},1e3)}})}).catch(function(r){g(r)})}function g(e){let t=s("Please activate manually","google-analytics-for-wordpress");e.response&&(t=d(s("Error: %1$s, %2$s","google-analytics-for-wordpress"),e.response.status,e.response.statusText)),o.prototype.$swal({icon:"error",customClass:{container:"monsterinsights-swal"},title:s("Error Activating Addon","google-analytics-for-wordpress"),html:t,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showCancelButton:!0,confirmButtonText:s("View Addons","google-analytics-for-wordpress"),cancelButtonText:s("Dismiss","google-analytics-for-wordpress")}).then(function(r){r.value&&(window.location=o.prototype.$mi.addons_url,o.prototype.$swal({icon:"info",customClass:{container:"monsterinsights-swal"},title:s("Redirecting","google-analytics-for-wordpress"),html:s("Please wait","google-analytics-for-wordpress"),allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:function(){o.prototype.$swal.showLoading()}}))})}function u(e){e.rootState.$_widget||typeof o.prototype.$swal=="function"&&o.prototype.$swal.close()}const R={getReportData:D,installAddon:y,activateAddon:_},L=e=>e.yearinreview_data,B=e=>e.activeReport,b=e=>e.isLoaded,S=e=>e.blur,U=e=>e.mobileTableExpanded,C=e=>e.overview,P=e=>e.publisher,O=e=>e.ecommerce,Y=e=>e.ecommerce_coupons,I=e=>e.ecommerce_funnel,M=e=>e.queries,N=e=>e.dimensions,k=e=>e.forms,K=e=>e.realtime,q=e=>e.yearinreview,V=e=>e.sitespeed,H=e=>e.sitespeedmobile,F=e=>e.noauth,G=e=>e.reauth,X=e=>e.media,j=e=>e.traffic_overview,Q=e=>e.traffic_landing_pages,W=e=>e.traffic_technology,z=e=>e.traffic_campaign,J=e=>e.traffic_source_medium,Z=e=>e.traffic_social,x=e=>e.engagement_pages,ee=()=>n("overview"),te=()=>n("ecommerce"),oe=()=>n("ecommerce_coupons"),ae=()=>n("dimensions"),re=()=>n("traffic_overview"),se=()=>n("traffic_technology"),ne=()=>n("traffic_landing_pages"),ie=()=>n("traffic_campaign"),le=()=>n("traffic_source_medium"),ce=()=>n("traffic_social"),de=()=>n("publisher"),fe=()=>n("engagement_pages"),me=()=>n("queries"),pe=()=>n("forms"),ue=()=>n("realtime"),_e=()=>n("sitespeed"),ge=()=>n("media");function m(e,t){return e.format("YYYYMMDD")===t.format("YYYYMMDD")?e.format("MMMM D, YYYY"):e.format("MMMM D")+" - "+t.format("MMMM D, YYYY")}function we(e){let t=e.date,r=o.prototype.$mi_intervals();if(r[t.interval]){let a=r[t.interval];t.intervalText=m(a.start,a.end),t.intervalCompareText=m(a.compareStart,a.compareEnd)}else t.intervalText=m(f(t.start),f(t.end)),t.intervalCompareText=m(f(t.compareStart),f(t.compareEnd));return t}const ye={yearinreview_data:L,date:we,activeReport:B,isLoaded:b,blur:S,mobileTableExpanded:U,overview:C,publisher:P,ecommerce:O,ecommerce_coupons:Y,ecommerce_funnel:I,queries:M,dimensions:N,forms:k,realtime:K,noauth:F,yearinreview:q,reauth:G,sitespeed:V,sitespeedmobile:H,media:X,traffic_overview:j,traffic_landing_pages:Q,traffic_technology:W,traffic_campaign:z,traffic_source_medium:J,traffic_social:Z,engagement_pages:x,demo_overview:ee,demo_ecommerce:te,demo_ecommerce_coupons:oe,demo_dimensions:ae,demo_traffic_overview:re,demo_traffic_technology:se,demo_traffic_landing_pages:ne,demo_traffic_campaign:ie,demo_traffic_source_medium:le,demo_traffic_social:ce,demo_publisher:de,demo_engagement_pages:fe,demo_queries:me,demo_forms:pe,demo_realtime:ue,demo_sitespeed:_e,demo_media:ge},he=(e,t)=>{t.report&&t.data&&e[t.report]&&o.set(e,t.report,t.data)},Ee=(e,t)=>{t.start&&t.end&&(o.set(e.date,"start",t.start),o.set(e.date,"end",t.end))},Ae=(e,t)=>{o.set(e.date,"interval",t)},ve=(e,t)=>{o.set(e.date,"text",t)},Te=(e,t)=>{e.activeReport=t},De=e=>{e.isLoaded=!0},$e=e=>{e.blur=!0},Re=e=>{e.blur=!1},Le=e=>{e.mobileTableExpanded=!0},Be=e=>{e.mobileTableExpanded=!1},be=e=>{e.noauth=!0},Se=e=>{e.reauth=!0},Ue=(e,t)=>{e.required_addon=t},Ce=(e,t)=>{e.date={...e.date,...t}},Pe={UPDATE_REPORT_DATA:he,UPDATE_DATE:Ee,UPDATE_ACTIVE_REPORT:Te,UPDATE_INTERVAL:Ae,UPDATE_DATE_TEXT:ve,SET_IS_LOADED:De,ENABLE_BLUR:$e,DISABLE_BLUR:Re,EXPAND_TABLES:Le,CONTRACT_TABLES:Be,ENABLE_NOAUTH:be,ENABLE_REAUTH:Se,UPDATE_REQUIRED_ADDON:Ue,UPDATE_DATE_STORE:Ce},Oe={yearinreview_data:window.monsterinsights.yearinreview,date:{start:"",end:"",interval:"last30days",text:"",compareReport:!1,compareStart:"",compareEnd:""},blur:!1,activeReport:"overview",mobileTableExpanded:!1,overview:{},publisher:{},ecommerce:{},ecommerce_coupons:{},ecommerce_funnel:{funnel_table:{none:[]},funnel_chart:[]},queries:{},dimensions:{},forms:{},realtime:{},yearinreview:{},sitespeed:{},sitespeedmobile:{},noauth:!1,reauth:!1,isLoaded:!1,media:{line_chart_report:{},video_details_rows:[]},traffic_overview:{},traffic_landing_pages:{},traffic_technology:{},traffic_campaign:{},traffic_source_medium:{},traffic_social:{sessions_chart:{}},engagement_pages:{},required_addon:null},Me={namespaced:!0,state:Oe,actions:R,getters:ye,mutations:Pe};export{Me as R,_ as a,y as i};
